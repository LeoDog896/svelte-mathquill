import{S as I,i as Q,s as S,e as $,x as V,k as z,c as y,a as M,y as B,m as H,d,b as w,g as E,z as L,H as N,Q as U,r as m,p as g,C as j,q as A,U as F,M as C,N as G,o as J,E as q}from"../chunks/index-11b9fab4.js";import{M as K}from"../chunks/MathQuill-2e3134e9.js";function v(a,r,s){const t=a.slice();return t[5]=r[s].latex,t[6]=r[s].element,t[7]=r,t[8]=s,t}function k(a){let r,s,t=a[7],n=a[8],u,l,o;const e=()=>a[1](s,t,n),i=()=>a[1](null,t,n);function f(h){a[2](h,a[5],a[7],a[8])}function _(){return a[3](a[8])}function D(){return a[4](a[8])}let p={};return a[5]!==void 0&&(p.latex=a[5]),s=new K({props:p}),e(),C.push(()=>G(s,"latex",f)),s.$on("delete",_),s.$on("enter",D),{c(){r=$("div"),V(s.$$.fragment),l=z(),this.h()},l(h){r=y(h,"DIV",{class:!0});var c=M(r);B(s.$$.fragment,c),l=H(c),c.forEach(d),this.h()},h(){w(r,"class","mb-2")},m(h,c){E(h,r,c),L(s,r,null),N(r,l),o=!0},p(h,c){a=h,(t!==a[7]||n!==a[8])&&(i(),t=a[7],n=a[8],e());const b={};!u&&c&1&&(u=!0,b.latex=a[5],U(()=>u=!1)),s.$set(b)},i(h){o||(m(s.$$.fragment,h),o=!0)},o(h){g(s.$$.fragment,h),o=!1},d(h){h&&d(r),i(),j(s)}}}function O(a){let r,s,t=a[0],n=[];for(let l=0;l<t.length;l+=1)n[l]=k(v(a,t,l));const u=l=>g(n[l],1,1,()=>{n[l]=null});return{c(){r=$("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){r=y(l,"DIV",{class:!0});var o=M(r);for(let e=0;e<n.length;e+=1)n[e].l(o);o.forEach(d),this.h()},h(){w(r,"class","p-8")},m(l,o){E(l,r,o);for(let e=0;e<n.length;e+=1)n[e].m(r,null);s=!0},p(l,[o]){if(o&1){t=l[0];let e;for(e=0;e<t.length;e+=1){const i=v(l,t,e);n[e]?(n[e].p(i,o),m(n[e],1)):(n[e]=k(i),n[e].c(),m(n[e],1),n[e].m(r,null))}for(J(),e=t.length;e<n.length;e+=1)u(e);A()}},i(l){if(!s){for(let o=0;o<t.length;o+=1)m(n[o]);s=!0}},o(l){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)g(n[o]);s=!1},d(l){l&&d(r),F(n,l)}}}function P(a,r,s){let t=[{latex:""}];function n(e,i,f){C[e?"unshift":"push"](()=>{i[f].element=e,s(0,t)})}function u(e,i,f,_){f[_].latex=e,s(0,t)}return[t,n,u,async e=>{var i;t.length!==1&&(s(0,t=t.filter((f,_)=>e!==_)),await q(),(i=t[Math.max(e-1,0)].element)==null||i.focus())},async e=>{var i;(t.length===1||t[t.length-1].latex)&&s(0,t=[...t,{latex:""}]),await q(),(i=t[Math.min(e+1,t.length-1)].element)==null||i.focus()}]}class W extends I{constructor(r){super(),Q(this,r,P,O,S,{})}}export{W as default};
