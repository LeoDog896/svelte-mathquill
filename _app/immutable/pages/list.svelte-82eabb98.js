import{S as I,i as L,s as Q,e as k,x as S,k as U,c as v,a as M,y as V,m as z,d as g,b as w,g as E,z as B,H,Q as N,r as d,p,C as j,q as A,U as F,M as C,N as G,o as J,E as y}from"../chunks/index-11b9fab4.js";import{M as K}from"../chunks/MathQuill-755feaf1.js";function q(n,r,a){const e=n.slice();return e[6]=r[a].latex,e[7]=r[a].element,e[8]=r,e[9]=a,e}function $(n){let r,a,e=n[8],t=n[9],_,l,o;const s=()=>n[1](a,e,t),i=()=>n[1](null,e,t);function h(u){n[2](u,n[6],n[8],n[9])}function f(){return n[3](n[9])}function c(...u){return n[4](n[9],...u)}function D(){return n[5](n[9])}let O={};return n[6]!==void 0&&(O.latex=n[6]),a=new K({props:O}),s(),C.push(()=>G(a,"latex",h)),a.$on("deleteOutOf",f),a.$on("outOfOnly",c),a.$on("enter",D),{c(){r=k("div"),S(a.$$.fragment),l=U(),this.h()},l(u){r=v(u,"DIV",{class:!0});var m=M(r);V(a.$$.fragment,m),l=z(m),m.forEach(g),this.h()},h(){w(r,"class","mb-2")},m(u,m){E(u,r,m),B(a,r,null),H(r,l),o=!0},p(u,m){n=u,(e!==n[8]||t!==n[9])&&(i(),e=n[8],t=n[9],s());const b={};!_&&m&1&&(_=!0,b.latex=n[6],N(()=>_=!1)),a.$set(b)},i(u){o||(d(a.$$.fragment,u),o=!0)},o(u){p(a.$$.fragment,u),o=!1},d(u){u&&g(r),i(),j(a)}}}function P(n){let r,a,e=n[0],t=[];for(let l=0;l<e.length;l+=1)t[l]=$(q(n,e,l));const _=l=>p(t[l],1,1,()=>{t[l]=null});return{c(){r=k("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){r=v(l,"DIV",{class:!0});var o=M(r);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(g),this.h()},h(){w(r,"class","p-8")},m(l,o){E(l,r,o);for(let s=0;s<t.length;s+=1)t[s].m(r,null);a=!0},p(l,[o]){if(o&1){e=l[0];let s;for(s=0;s<e.length;s+=1){const i=q(l,e,s);t[s]?(t[s].p(i,o),d(t[s],1)):(t[s]=$(i),t[s].c(),d(t[s],1),t[s].m(r,null))}for(J(),s=e.length;s<t.length;s+=1)_(s);A()}},i(l){if(!a){for(let o=0;o<e.length;o+=1)d(t[o]);a=!0}},o(l){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)p(t[o]);a=!1},d(l){l&&g(r),F(t,l)}}}function R(n,r,a){let e=[{latex:""}];function t(i,h,f){C[i?"unshift":"push"](()=>{h[f].element=i,a(0,e)})}function _(i,h,f,c){f[c].latex=i,a(0,e)}return[e,t,_,async i=>{var h;e.length!==1&&(a(0,e=e.filter((f,c)=>i!==c)),await y(),(h=e[Math.max(i-1,0)].element)==null||h.focus())},async(i,h)=>{var f,c;h.detail=="U"||h.detail=="L"&&i!==0?(f=e[i-1].element)==null||f.focus():i+1!==e.length&&((c=e[i+1].element)==null||c.focus())},async i=>{var h;(e.length===1||e[e.length-1].latex)&&a(0,e=[...e,{latex:""}]),await y(),(h=e[Math.min(i+1,e.length-1)].element)==null||h.focus()}]}class X extends I{constructor(r){super(),L(this,r,R,P,Q,{})}}export{X as default};
