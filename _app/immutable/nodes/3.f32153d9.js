import{S as I,i as L,s as Q,k as $,l as k,m as w,h as g,n as M,b as E,g as d,f as S,d as p,Q as V,w as B,L as z,y as A,a as C,z as P,c as U,A as j,E as F,O as G,B as H,v as J,t as y}from"../chunks/index.a9d806a6.js";import{M as K}from"../chunks/MathQuill.f5dbaa15.js";function q(n,o,s){const e=n.slice();return e[6]=o[s].latex,e[7]=o[s].element,e[8]=o,e[9]=s,e}function v(n){let o,s,e=n[8],t=n[9],_,l,r;const a=()=>n[1](s,e,t),i=()=>n[1](null,e,t);function h(u){n[2](u,n[6],n[8],n[9])}function f(){return n[3](n[9])}function c(...u){return n[4](n[9],...u)}function D(){return n[5](n[9])}let O={};return n[6]!==void 0&&(O.latex=n[6]),s=new K({props:O}),a(),B.push(()=>z(s,"latex",h)),s.$on("deleteOutOf",f),s.$on("outOfOnly",c),s.$on("enter",D),{c(){o=$("div"),A(s.$$.fragment),l=C(),this.h()},l(u){o=k(u,"DIV",{class:!0});var m=w(o);P(s.$$.fragment,m),l=U(m),m.forEach(g),this.h()},h(){M(o,"class","mb-2")},m(u,m){E(u,o,m),j(s,o,null),F(o,l),r=!0},p(u,m){n=u,(e!==n[8]||t!==n[9])&&(i(),e=n[8],t=n[9],a());const b={};!_&&m&1&&(_=!0,b.latex=n[6],G(()=>_=!1)),s.$set(b)},i(u){r||(d(s.$$.fragment,u),r=!0)},o(u){p(s.$$.fragment,u),r=!1},d(u){u&&g(o),i(),H(s)}}}function N(n){let o,s,e=n[0],t=[];for(let l=0;l<e.length;l+=1)t[l]=v(q(n,e,l));const _=l=>p(t[l],1,1,()=>{t[l]=null});return{c(){o=$("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){o=k(l,"DIV",{class:!0});var r=w(o);for(let a=0;a<t.length;a+=1)t[a].l(r);r.forEach(g),this.h()},h(){M(o,"class","p-8")},m(l,r){E(l,o,r);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(o,null);s=!0},p(l,[r]){if(r&1){e=l[0];let a;for(a=0;a<e.length;a+=1){const i=q(l,e,a);t[a]?(t[a].p(i,r),d(t[a],1)):(t[a]=v(i),t[a].c(),d(t[a],1),t[a].m(o,null))}for(J(),a=e.length;a<t.length;a+=1)_(a);S()}},i(l){if(!s){for(let r=0;r<e.length;r+=1)d(t[r]);s=!0}},o(l){t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)p(t[r]);s=!1},d(l){l&&g(o),V(t,l)}}}function R(n,o,s){let e=[{latex:""}];function t(i,h,f){B[i?"unshift":"push"](()=>{h[f].element=i,s(0,e)})}function _(i,h,f,c){f[c].latex=i,s(0,e)}return[e,t,_,async i=>{var h;e.length!==1&&(s(0,e=e.filter((f,c)=>i!==c)),await y(),(h=e[Math.max(i-1,0)].element)==null||h.focus())},async(i,h)=>{var f,c;h.detail=="U"||h.detail=="L"&&i!==0?(f=e[i-1].element)==null||f.focus():i+1!==e.length&&((c=e[i+1].element)==null||c.focus())},async i=>{var h;(e.length===1||e[e.length-1].latex)&&s(0,e=[...e,{latex:""}]),await y(),(h=e[Math.min(i+1,e.length-1)].element)==null||h.focus()}]}class X extends I{constructor(o){super(),L(this,o,R,N,Q,{})}}export{X as component};
